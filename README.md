# TrashBot ‚Äî –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –æ—á–µ—Ä–µ–¥–∏ –Ω–∞ –≤—ã–Ω–æ—Å –º—É—Å–æ—Ä–∞

TrashBot –ø–æ–º–æ–≥–∞–µ—Ç –Ω–µ–±–æ–ª—å—à–∏–º –≥—Ä—É–ø–ø–∞–º (–æ–±—â–µ–∂–∏—Ç–∏—è, –∫–æ–º–º—É–Ω–∞–ª–∫–∏, –∫–≤–∞—Ä—Ç–∏—Ä—ã) –≤–µ—Å—Ç–∏ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –≤—ã–Ω–æ—Å –º—É—Å–æ—Ä–∞. –ë–æ—Ç:
- –≤–µ–¥–µ—Ç –æ—á–µ—Ä–µ–¥—å –ø–æ `start_date` –∏ —Å–ø–∏—Å–∫—É —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤;
- —Ä–∞—Å—Å—ã–ª–∞–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—É—é —Å–≤–æ–¥–∫—É (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏–Ω—Ñ–æ-—Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è);
- —à–ª–µ—Ç –ø–∏–Ω–≥ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–º—É –∑–∞ —Å–µ–≥–æ–¥–Ω—è (–æ–¥–Ω–æ –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –¥–µ–Ω—å, –ø–æ–≤—Ç–æ—Ä –∑–∞–º–µ—â–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ);
- —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∏—Å—Ç–æ—Ä–∏—é –≤ JSON;
- —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–µ–∂–∏–º–∞—Ö `register`, `normal`, `test`, `debug`;
- —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ ‚Äî —á–µ—Ä–µ–∑ GitHub Actions –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1) –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —É BotFather –∏ –¥–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –∫–∞–∫ Secret `TELEGRAM_TOKEN` –≤ GitHub (Settings ‚Üí Secrets ‚Üí Actions).
2) –ó–∞–ø–æ–ª–Ω–∏—Ç–µ `people.json`:
```json
{
  "start_date": "2025-10-01",
  "people": [
    { "name": "–ò–º—è", "tg": "@username", "chat_id": 123, "tester": true }
  ]
}
```
3) –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ `MODE=test`, —á—Ç–æ–±—ã –Ω–µ —Ç—Ä–µ–≤–æ–∂–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.

## –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

- `register` ‚Äî —Å–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–≤ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º –≤–∏–¥–µ, –º–æ–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å long-poll getUpdates).
- `normal` ‚Äî –±–æ–µ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞: —Å–≤–æ–¥–∫–∞ –≤—Å–µ–º, –ø–∏–Ω–≥ —Ç–æ–ª—å–∫–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–º—É.
- `test` ‚Äî —Ä–∞—Å—Å—ã–ª–∫–∞ —Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç–µ—Ä–∞–º. –°–æ–æ–±—â–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∞—Ç —è–≤–Ω—É—é –ø–æ–º–µ—Ç–∫—É, –∫–æ–º—É –æ–Ω–∏ –±—ã–ª–∏ –±—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ –±–æ—é.
- `debug` ‚Äî –ª–æ–∫–∞–ª—å–Ω–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–ø–µ—á–∞—Ç–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Ä—É—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è).

–í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞: env `MODE` –∏–ª–∏ input workflow.

## –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏ –æ–∫–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏

- –¢–∞–π–º–∑–æ–Ω–∞ –±–µ—Ä–µ—Ç—Å—è –∏–∑ `BOT_TZ` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `Europe/Moscow`).
- –¶–µ–ª–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –æ—Ç–ø—Ä–∞–≤–∫–∏: `FIRE_TIMES` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `10:00,20:00,23:00`).
- –î–æ–ø—É—Å–∫ —Ä–∞–Ω–Ω–µ–≥–æ/–ø–æ–∑–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞: `WINDOW_MIN` –º–∏–Ω—É—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 15). –ï—Å–ª–∏ workflow —Å—Ç–∞—Ä—Ç–æ–≤–∞–ª —á—É—Ç—å —Ä–∞–Ω—å—à–µ/–ø–æ–∑–∂–µ, –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ –æ–∫–Ω–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –µ–¥–∏–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é —Ä–∞—Å—Å—ã–ª–∫—É.
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞–ø–æ–º–∏–Ω–∞—é—Ç—Å—è —É–∂–µ "—Å—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ" –æ–∫–Ω–∞ –¥–Ω—è (per-user), —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –¥—É–±–ª–µ–π.

## –°–æ–æ–±—â–µ–Ω–∏—è

- –°–≤–æ–¥–∫–∞ (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–∞—è, 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å):
```
üóì –î–∞—Ç–∞: YYYY-MM-DD
üßπ –°–µ–≥–æ–¥–Ω—è –≤—ã–Ω–æ—Å–∏—Ç: –ò–º—è @username
üìÖ –í—á–µ—Ä–∞: –ò–º—è @username
üìÜ –ó–∞–≤—Ç—Ä–∞: –ò–º—è @username
```
- –ü–∏–Ω–≥ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–º—É:
```
–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: —Å–µ–≥–æ–¥–Ω—è –≤–∞—à–∞ –æ—á–µ—Ä–µ–¥—å –≤—ã–Ω–µ—Å—Ç–∏ –º—É—Å–æ—Ä.
```
- –í `test` —Ä–µ–∂–∏–º–µ:
  - –°–≤–æ–¥–∫–∞ –ø–æ–º–µ—á–∞–µ—Ç—Å—è `[TEST]` –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç ¬´–±–æ–µ–≤–æ–π¬ª —Ç–µ–∫—Å—Ç.
  - –ü–∏–Ω–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–º–µ—Ç–∫—É –∞–¥—Ä–µ—Å–∞—Ç–∞ (–∏–º—è, @username, chat_id).

## GitHub Actions

Workflow `.github/workflows/trashbot.yml`:
- schedule: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –µ–∂–µ—á–∞—Å–Ω–æ (—á—Ç–æ–±—ã –ø–æ–ø–∞—Å—Ç—å –≤ –æ–∫–Ω–∞) –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ `mode=test`.
- manual: `workflow_dispatch` —Å –≤—ã–±–æ—Ä–æ–º `mode`.

–ü—Ä–∏–º–µ—Ä —Å–µ–∫—Ä–µ—Ç–∞ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- `TELEGRAM_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (Secret).
- `BOT_TZ` ‚Äî —Ç–∞–π–º–∑–æ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Europe/Moscow`).
- `FIRE_TIMES` ‚Äî –º–æ–º–µ–Ω—Ç—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `10:00,20:00,23:00`).
- `WINDOW_MIN` ‚Äî –¥–æ–ø—É—Å–∫ –≤ –º–∏–Ω—É—Ç–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, `15`).

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

```
export TELEGRAM_TOKEN=...  # —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
export MODE=test           # –∏–ª–∏ normal/register/debug
python3 bot.py
```

–ï—Å–ª–∏ `TELEGRAM_TOKEN` –Ω–µ –∑–∞–¥–∞–Ω, —Å–∫—Ä–∏–ø—Ç –¥–µ–ª–∞–µ—Ç ¬´—Å—É—Ö–æ–π –ø—Ä–æ–≥–æ–Ω¬ª (–ª–æ–≥–∏—Ä—É–µ—Ç, —á—Ç–æ –±—ã –æ—Ç–ø—Ä–∞–≤–∏–ª).

## –î–∞–Ω–Ω—ã–µ

- `people.json` ‚Äî —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∏ `start_date`.
- `state.json` ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Å—É—Ç–æ—á–Ω—ã–µ —Å—á–µ—Ç—á–∏–∫–∏.
- `history.json` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ; –∫–Ω–æ–ø–∫–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ).

## –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ

- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `register` —á–µ—Ä–µ–∑ long-poll –∏ –∫–æ–º–∞–Ω–¥—É ¬´–º—É—Å–æ—Ä –º–æ–π¬ª.
- –î–æ–±–∞–≤–∏—Ç—å inline-–∫–Ω–æ–ø–∫—É ¬´–í—ã–Ω–µ—Å –º—É—Å–æ—Ä¬ª –∏ –∑–∞–ø–∏—Å—å –≤ `history.json`.
- –£–ª—É—á—à–∏—Ç—å –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.
- CI: –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –ª–æ–≥–æ–≤ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞—Å—Å—ã–ª–∫–∏.
